<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin Dashboard - FlashBuy</title>
  <script defer src="https://cloud.umami.is/script.js" data-website-id="f974dcbb-29aa-4518-89ec-ab9e4abce31d"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Segoe UI', sans-serif; background: #f5f7fa; display: flex; height: 100vh; overflow: hidden; }
    
    /* SIDEBAR */
    .sidebar { width: 280px; background: linear-gradient(180deg, #0B1320 0%, #1a2942 100%); color: white; position: fixed; left: 0; top: 0; height: 100vh; z-index: 100; box-shadow: 4px 0 20px rgba(0,0,0,0.15); display: flex; flex-direction: column; transition: transform 0.3s; }
    .sidebar-header { padding: 25px 20px; border-bottom: 1px solid rgba(255,255,255,0.1); }
    .sidebar-logo { width: 180px; height: auto; }
    .sidebar-menu { flex: 1; overflow-y: auto; padding: 20px 0; }
    .menu-item { display: flex; align-items: center; gap: 15px; padding: 15px 25px; color: rgba(255,255,255,0.8); text-decoration: none; cursor: pointer; border-left: 4px solid transparent; font-size: 15px; font-weight: 500; transition: all 0.3s; }
    .menu-item:hover { background: rgba(255,255,255,0.05); color: white; border-left-color: #FF7A00; }
    .menu-item.active { background: rgba(255,122,0,0.15); color: #FF7A00; border-left-color: #FF7A00; }
    .menu-item-icon { font-size: 20px; width: 24px; text-align: center; }
    .sidebar-footer { padding: 20px; border-top: 1px solid rgba(255,255,255,0.1); }
    .user-info { display: flex; align-items: center; gap: 12px; padding: 12px; background: rgba(255,255,255,0.05); border-radius: 8px; }
    .user-avatar { width: 40px; height: 40px; border-radius: 50%; background: #FF7A00; display: flex; align-items: center; justify-content: center; font-size: 18px; font-weight: bold; }
    .user-name { font-weight: 600; font-size: 14px; }
    .user-role { font-size: 12px; color: rgba(255,255,255,0.6); }
    
    /* MAIN */
    .main-content { margin-left: 280px; flex: 1; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
    .top-bar { background: white; padding: 20px 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px; }
    .top-bar-left h1 { font-size: 24px; color: #0B1320; margin: 0; }
    .top-bar-left p { color: #666; font-size: 14px; margin: 5px 0 0 0; }
    .btn-visit-store { padding: 10px 20px; background: #FF7A00; color: white; border: none; border-radius: 6px; font-weight: 600; cursor: pointer; text-decoration: none; display: inline-flex; align-items: center; gap: 8px; transition: all 0.3s; }
    .btn-visit-store:hover { background: #e66d00; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(255,122,0,0.3); }
    .content-area { flex: 1; overflow-y: auto; padding: 30px; }
    
    /* SECTIONS */
    .section { display: none; }
    .section.active { display: block; animation: fadeIn 0.3s; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    
    /* STATS */
    .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px; }
    .stat-card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); transition: all 0.3s; border-left: 4px solid #FF7A00; position: relative; overflow: hidden; }
    .stat-card:hover { transform: translateY(-5px); box-shadow: 0 8px 20px rgba(0,0,0,0.12); }
    .stat-card.blue { border-left-color: #2196F3; }
    .stat-card.green { border-left-color: #4CAF50; }
    .stat-card.purple { border-left-color: #9C27B0; }
    .stat-card h3 { margin: 0; color: #666; font-size: 13px; text-transform: uppercase; font-weight: 600; }
    .stat-number { font-size: 32px; font-weight: bold; color: #0B1320; margin: 10px 0; }
    .stat-change { font-size: 13px; color: #4CAF50; }
    
    /* CHARTS */
    .charts-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(450px, 1fr)); gap: 25px; margin-bottom: 30px; }
    .chart-card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
    .chart-card h3 { margin: 0 0 20px 0; color: #0B1320; font-size: 18px; font-weight: 600; }
    .chart-card.full-width { grid-column: 1 / -1; }
    
    /* TABLES */
    .table-container { background: white; border-radius: 12px; padding: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); margin-bottom: 30px; overflow-x: auto; }
    .table-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 15px; }
    .table-header h3 { margin: 0; font-size: 20px; color: #0B1320; font-weight: 600; }
    .table-actions { display: flex; gap: 10px; flex-wrap: wrap; }
    .search-box { padding: 10px 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 14px; width: 250px; transition: border-color 0.3s; }
    .search-box:focus { outline: none; border-color: #FF7A00; }
    .data-table { width: 100%; border-collapse: collapse; min-width: 800px; }
    .data-table thead { background: #f8f9fa; }
    .data-table th { padding: 15px; text-align: left; font-weight: 600; color: #0B1320; border-bottom: 2px solid #e0e0e0; font-size: 13px; text-transform: uppercase; }
    .data-table td { padding: 15px; border-bottom: 1px solid #f0f0f0; color: #555; font-size: 14px; }
    .data-table tbody tr:hover { background: #f8f9fa; }
    .product-img { width: 60px; height: 60px; object-fit: cover; border-radius: 8px; }
    
    /* BADGES */
    .badge { display: inline-block; padding: 5px 12px; border-radius: 20px; font-size: 11px; font-weight: 600; text-transform: uppercase; }
    .badge.hot { background: #ffebee; color: #c62828; }
    .badge.trending { background: #e8f5e9; color: #2e7d32; }
    .badge.low-stock { background: #fff3e0; color: #ef6c00; }
    
    /* BUTTONS */
    .btn { padding: 10px 20px; border: none; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.3s; display: inline-flex; align-items: center; gap: 8px; }
    .btn-primary { background: #FF7A00; color: white; }
    .btn-primary:hover { background: #e66d00; transform: translateY(-2px); }
    .btn-secondary { background: #6c757d; color: white; }
    .btn-edit { background: #0B1320; color: white; padding: 8px 16px; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 13px; }
    .btn-delete { background: #dc3545; color: white; padding: 8px 16px; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 13px; }
    
    /* FILTERS */
    .filter-buttons { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
    .filter-btn { padding: 10px 20px; border: 2px solid #e0e0e0; background: white; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 14px; transition: all 0.3s; }
    .filter-btn:hover { border-color: #FF7A00; color: #FF7A00; }
    .filter-btn.active { background: #FF7A00; color: white; border-color: #FF7A00; }
    
    /* FORMS */
    .form-section { background: white; padding: 30px; border-radius: 12px; margin-bottom: 30px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
    .form-section h2 { margin: 0 0 25px 0; color: #0B1320; font-size: 22px; font-weight: 600; }
    .form-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; }
    .form-group { margin-bottom: 20px; }
    .form-group.full-width { grid-column: 1 / -1; }
    .form-group label { display: block; font-weight: 600; margin-bottom: 8px; color: #0B1320; font-size: 14px; }
    .form-group input, .form-group select, .form-group textarea { width: 100%; padding: 12px 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 15px; transition: border-color 0.3s; font-family: inherit; }
    .form-group input:focus, .form-group select:focus, .form-group textarea:focus { outline: none; border-color: #FF7A00; }
    .form-group textarea { resize: vertical; min-height: 100px; }
    .form-actions { display: flex; gap: 15px; margin-top: 30px; flex-wrap: wrap; }
    
    /* ORDER STATUS */
    .order-status { display: inline-block; padding: 6px 14px; border-radius: 20px; font-size: 12px; font-weight: 600; text-transform: uppercase; }
    .order-status.pending { background: #fff3e0; color: #ef6c00; }
    .order-status.processing { background: #e3f2fd; color: #1565c0; }
    .order-status.shipped { background: #e8f5e9; color: #2e7d32; }
    .order-status.delivered { background: #c8e6c9; color: #1b5e20; }
    
    /* CUSTOMER */
    .customer-segment { display: inline-block; padding: 6px 12px; border-radius: 6px; font-size: 12px; font-weight: 600; }
    .customer-segment.vip { background: #ffd700; color: #8b6914; }
    .customer-segment.regular { background: #e3f2fd; color: #1565c0; }
    .customer-segment.new { background: #e8f5e9; color: #2e7d32; }
    
    /* COUPON */
    .coupon-card { background: white; padding: 20px; border-radius: 12px; border-left: 4px solid #FF7A00; margin-bottom: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
    .coupon-code { font-size: 24px; font-weight: bold; color: #FF7A00; font-family: 'Courier New', monospace; }
    
    /* SHIPPING */
    .shipping-zone { background: white; padding: 20px; border-radius: 12px; border: 2px solid #e0e0e0; margin-bottom: 15px; }
    .shipping-zone h4 { margin: 0 0 15px 0; color: #0B1320; }
    .shipping-rate { display: flex; justify-content: space-between; padding: 12px; background: #f8f9fa; border-radius: 6px; margin-bottom: 8px; }
    
    /* SETTINGS */
    .settings-section { background: white; padding: 25px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
    .settings-section h3 { margin: 0 0 20px 0; color: #0B1320; font-size: 18px; font-weight: 600; padding-bottom: 15px; border-bottom: 2px solid #f0f0f0; }
    .setting-item { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px solid #f0f0f0; }
    .setting-item:last-child { border-bottom: none; }
    .setting-label h4 { margin: 0 0 5px 0; font-size: 15px; color: #0B1320; }
    .setting-label p { margin: 0; font-size: 13px; color: #666; }
    .toggle-switch { position: relative; width: 50px; height: 26px; }
    .toggle-switch input { display: none; }
    .toggle-slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: 0.3s; border-radius: 26px; }
    .toggle-slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 3px; bottom: 3px; background-color: white; transition: 0.3s; border-radius: 50%; }
    .toggle-switch input:checked + .toggle-slider { background-color: #FF7A00; }
    .toggle-switch input:checked + .toggle-slider:before { transform: translateX(24px); }
    
    /* MOBILE */
    .mobile-menu-btn { display: none; position: fixed; bottom: 20px; right: 20px; width: 60px; height: 60px; background: #FF7A00; color: white; border: none; border-radius: 50%; font-size: 24px; cursor: pointer; box-shadow: 0 4px 20px rgba(255,122,0,0.4); z-index: 99; }
    
    @media (max-width: 1024px) {
      .sidebar { transform: translateX(-100%); }
      .sidebar.open { transform: translateX(0); }
      .main-content { margin-left: 0; }
      .mobile-menu-btn { display: flex; align-items: center; justify-content: center; }
      .charts-grid { grid-template-columns: 1fr; }
      .form-grid { grid-template-columns: 1fr; }
    }
    
    @media (max-width: 768px) {
      .stats-grid { grid-template-columns: 1fr; }
      .content-area { padding: 20px 15px; }
    }
  </style>
</head>
<body>

  <aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <img src="https://pruebaflash.netlify.app/flashbuy-logo-white.svg" alt="FlashBuy" class="sidebar-logo" />
    </div>
    <nav class="sidebar-menu">
      <a class="menu-item active" onclick="switchSection('dashboard')">
        <span class="menu-item-icon">üìä</span><span>Dashboard</span>
      </a>
      <a class="menu-item" onclick="switchSection('productos')">
        <span class="menu-item-icon">üì¶</span><span>Productos</span>
      </a>
      <a class="menu-item" onclick="switchSection('agregar-producto')">
        <span class="menu-item-icon">‚ûï</span><span>Agregar Producto</span>
      </a>
      <a class="menu-item" onclick="switchSection('pedidos')">
        <span class="menu-item-icon">üõí</span><span>Pedidos</span>
      </a>
      <a class="menu-item" onclick="switchSection('clientes')">
        <span class="menu-item-icon">üë•</span><span>Clientes</span>
      </a>
      <a class="menu-item" onclick="switchSection('marketing')">
        <span class="menu-item-icon">üéØ</span><span>Marketing</span>
      </a>
      <a class="menu-item" onclick="switchSection('envios')">
        <span class="menu-item-icon">üöö</span><span>Env√≠os</span>
      </a>
      <a class="menu-item" onclick="switchSection('configuracion')">
        <span class="menu-item-icon">‚öôÔ∏è</span><span>Configuraci√≥n</span>
      </a>
    </nav>
    <div class="sidebar-footer">
      <div class="user-info">
        <div class="user-avatar">A</div>
        <div>
          <div class="user-name">Admin FlashBuy</div>
          <div class="user-role">Administrador</div>
        </div>
      </div>
    </div>
  </aside>

  <main class="main-content">
    <header class="top-bar">
      <div class="top-bar-left">
        <h1 id="pageTitle">üìä Dashboard</h1>
        <p id="pageSubtitle">Resumen general de tu tienda</p>
      </div>
      <div>
        <a href="https://pruebaflash.netlify.app" target="_blank" class="btn-visit-store">üåê Ver Tienda</a>
      </div>
    </header>

    <div class="content-area">

      <!-- DASHBOARD -->
      <section id="dashboard" class="section active">
        <div class="stats-grid">
          <div class="stat-card">
            <h3>Total Productos</h3>
            <div class="stat-number" id="stat-total-productos">0</div>
            <div class="stat-change">En cat√°logo</div>
          </div>
          <div class="stat-card green">
            <h3>En Stock</h3>
            <div class="stat-number" id="stat-en-stock">0</div>
            <div class="stat-change">Disponibles</div>
          </div>
          <div class="stat-card blue">
            <h3>Stock Bajo</h3>
            <div class="stat-number" id="stat-stock-bajo">0</div>
            <div class="stat-change">Menos de 20 unidades</div>
          </div>
          <div class="stat-card purple">
            <h3>Valor Inventario</h3>
            <div class="stat-number" id="stat-valor-inventario">R$ 0</div>
            <div class="stat-change">Total en productos</div>
          </div>
        </div>

        <div class="charts-grid">
          <div class="chart-card">
            <h3>üìä Productos por Categor√≠a</h3>
            <canvas id="chartCategorias"></canvas>
          </div>
          <div class="chart-card">
            <h3>üì¶ Estado del Stock</h3>
            <canvas id="chartStock"></canvas>
          </div>
        </div>

        <div class="table-container">
          <div class="table-header">
            <h3>üî• Productos con Stock Cr√≠tico</h3>
          </div>
          <table class="data-table">
            <thead>
              <tr>
                <th>Producto</th>
                <th>Categor√≠a</th>
                <th>Stock</th>
                <th>Precio</th>
              </tr>
            </thead>
            <tbody id="critical-stock-tbody">
              <tr><td colspan="4" style="text-align:center;padding:20px;color:#999;">Cargando...</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- PRODUCTOS -->
      <section id="productos" class="section">
        <div class="table-container">
          <div class="table-header">
            <h3>üì¶ Gesti√≥n de Productos</h3>
            <div class="table-actions">
              <input type="text" class="search-box" id="search-productos" placeholder="üîç Buscar productos..." oninput="buscarProductos()">
              <button class="btn btn-primary" onclick="switchSection('agregar-producto')">‚ûï Agregar Producto</button>
            </div>
          </div>
          
          <div class="filter-buttons">
            <button class="filter-btn active" onclick="filtrarProductos('todos')">üìã Todos</button>
            <button class="filter-btn" onclick="filtrarProductos('Tecnologia')">üíª Tecnolog√≠a</button>
            <button class="filter-btn" onclick="filtrarProductos('Ropa')">üëï Ropa</button>
            <button class="filter-btn" onclick="filtrarProductos('Accesorios')">üëú Accesorios</button>
            <button class="filter-btn" onclick="filtrarProductos('Utensilios')">üç¥ Utensilios</button>
            <button class="filter-btn" onclick="filtrarProductos('stock-bajo')">‚ö†Ô∏è Stock Bajo</button>
            <button class="filter-btn" onclick="filtrarProductos('sin-stock')">‚ùå Sin Stock</button>
          </div>

          <table class="data-table">
            <thead>
              <tr>
                <th>#</th>
                <th>Producto</th>
                <th>Precio</th>
                <th>Stock</th>
                <th>Categor√≠a</th>
                <th>Estado</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody id="productos-tbody">
              <tr><td colspan="7" style="text-align:center;padding:40px;color:#999;">Cargando productos...</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- AGREGAR/EDITAR PRODUCTO -->
      <section id="agregar-producto" class="section">
        <div class="form-section">
          <h2 id="form-title">‚ûï Agregar Nuevo Producto</h2>
          <form id="productoForm" onsubmit="guardarProducto(event)">
            <input type="hidden" id="editing_id" value="">
            <div class="form-grid">
              <div class="form-group">
                <label>Nombre del Producto *</label>
                <input type="text" id="producto_nombre" required placeholder="Ej: Mouse Gamer RGB Pro">
              </div>
              <div class="form-group">
                <label>Precio (R$) *</label>
                <input type="number" id="producto_precio" step="0.01" required placeholder="79.90">
              </div>
              <div class="form-group">
                <label>Categor√≠a *</label>
                <select id="producto_categoria" required>
                  <option value="">Seleccionar...</option>
                  <option value="Tecnologia">Tecnolog√≠a</option>
                  <option value="Ropa">Ropa</option>
                  <option value="Accesorios">Accesorios</option>
                  <option value="Utensilios">Utensilios</option>
                </select>
              </div>
              <div class="form-group">
                <label>Stock Disponible *</label>
                <input type="number" id="producto_stock" required placeholder="50">
              </div>
              <div class="form-group full-width">
                <label>Descripci√≥n del Producto</label>
                <textarea id="producto_descripcion" rows="3" placeholder="Descripci√≥n detallada..."></textarea>
              </div>
              <div class="form-group full-width">
                <label>URL de la Imagen Principal *</label>
                <input type="url" id="producto_imagen" required placeholder="https://images.unsplash.com/photo-...">
              </div>
            </div>
            <div class="form-actions">
              <button type="submit" class="btn btn-primary" id="btn-submit">üíæ Guardar Producto</button>
              <button type="button" class="btn btn-secondary" onclick="cancelarEdicion()">‚ùå Cancelar</button>
            </div>
          </form>
        </div>
      </section>

      <!-- PEDIDOS -->
      <section id="pedidos" class="section">
        <div class="table-container">
          <div class="table-header">
            <h3>üõí Gesti√≥n de Pedidos</h3>
            <button class="btn btn-primary" onclick="agregarPedidoDemo()">‚ûï Agregar Pedido Demo</button>
          </div>
          <table class="data-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Cliente</th>
                <th>Productos</th>
                <th>Total</th>
                <th>Estado</th>
                <th>Fecha</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody id="pedidos-tbody">
              <tr><td colspan="7" style="text-align:center;padding:40px;color:#999;">No hay pedidos registrados</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- CLIENTES -->
      <section id="clientes" class="section">
        <div class="table-container">
          <div class="table-header">
            <h3>üë• Base de Clientes</h3>
            <button class="btn btn-primary" onclick="agregarClienteDemo()">‚ûï Agregar Cliente Demo</button>
          </div>
          <table class="data-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Email</th>
                <th>Tel√©fono</th>
                <th>Compras</th>
                <th>Total Gastado</th>
                <th>Segmento</th>
              </tr>
            </thead>
            <tbody id="clientes-tbody">
              <tr><td colspan="7" style="text-align:center;padding:40px;color:#999;">No hay clientes registrados</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- MARKETING -->
      <section id="marketing" class="section">
        <div class="table-container">
          <div class="table-header">
            <h3>üéØ Cupones de Descuento</h3>
            <button class="btn btn-primary" onclick="mostrarFormCupon()">‚ûï Crear Cup√≥n</button>
          </div>

          <div id="form-cupon" style="display:none;margin-bottom:20px;">
            <form id="cuponForm" onsubmit="guardarCupon(event)" style="background:#f8f9fa;padding:20px;border-radius:8px;">
              <div class="form-grid">
                <div class="form-group">
                  <label>C√≥digo del Cup√≥n *</label>
                  <input type="text" id="cupon_codigo" required placeholder="FLASH10" style="text-transform:uppercase;">
                </div>
                <div class="form-group">
                  <label>Descuento (%) *</label>
                  <input type="number" id="cupon_descuento" required placeholder="10" min="1" max="100">
                </div>
                <div class="form-group">
                  <label>Fecha de Expiraci√≥n *</label>
                  <input type="date" id="cupon_expiracion" required>
                </div>
                <div class="form-group">
                  <label>Usos M√°ximos</label>
                  <input type="number" id="cupon_usos" placeholder="100" min="1">
                </div>
              </div>
              <div style="margin
<div style="margin-top:20px;">
                <button type="submit" class="btn btn-primary">üíæ Guardar Cup√≥n</button>
                <button type="button" class="btn btn-secondary" onclick="ocultarFormCupon()">‚ùå Cancelar</button>
              </div>
            </form>
          </div>

          <div id="cupones-list"></div>
        </div>
      </section>

      <!-- ENVIOS -->
      <section id="envios" class="section">
        <div class="table-container">
          <div class="table-header">
            <h3>üöö Configuraci√≥n de Env√≠os</h3>
            <button class="btn btn-primary" onclick="agregarZonaEnvio()">‚ûï Agregar Zona</button>
          </div>
          <div id="zonas-envio-list"></div>
        </div>
      </section>

      <!-- CONFIGURACION -->
      <section id="configuracion" class="section">
        <div class="settings-section">
          <h3>‚öôÔ∏è Configuraci√≥n General</h3>
          <div class="setting-item">
            <div class="setting-label">
              <h4>Modo Mantenimiento</h4>
              <p>Activar p√°gina de mantenimiento en la tienda</p>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="toggle-mantenimiento" onchange="toggleMantenimiento()">
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div class="setting-item">
            <div class="setting-label">
              <h4>Notificaciones por Email</h4>
              <p>Recibir emails de nuevos pedidos</p>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div class="setting-item">
            <div class="setting-label">
              <h4>Registro de Clientes</h4>
              <p>Permitir que nuevos usuarios se registren</p>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>

        <div class="settings-section">
          <h3>üîê Seguridad</h3>
          <button class="btn btn-secondary" onclick="limpiarDatos()">üóëÔ∏è Limpiar Todos los Datos</button>
          <button class="btn btn-primary" onclick="exportarDatos()" style="margin-left:10px;">üì• Exportar Datos</button>
        </div>
      </section>

    </div>
  </main>

  <button class="mobile-menu-btn" onclick="toggleSidebar()">‚ò∞</button>

  <script>
    // ============================================
    // VARIABLES GLOBALES
    // ============================================
    let productos = [];
    let pedidos = [];
    let clientes = [];
    let cupones = [];
    let zonasEnvio = [];
    let currentFilter = 'todos';
    let editingId = null;
    let charts = {};

    // ============================================
    // INICIALIZACI√ìN
    // ============================================
    document.addEventListener('DOMContentLoaded', function() {
      cargarDatos();
      actualizarDashboard();
      renderizarProductos();
      renderizarPedidos();
      renderizarClientes();
      renderizarCupones();
      renderizarZonasEnvio();
      cargarConfiguracion();
    });

    // ============================================
    // CARGAR DATOS
    // ============================================
    function cargarDatos() {
  // Cargar productos desde localStorage
  const savedProducts = localStorage.getItem('flashbuy_productos');
  if (savedProducts) {
    productos = JSON.parse(savedProducts);
  } else {
    // Si no hay productos, cargar los predeterminados
    productos = [
      { id: 1, nombre: "Cargador inal√°mbrico FastCharge", precio: 49.90, imagen: "https://images.unsplash.com/photo-1591290619762-c588dc522ff5?w=600&h=400&fit=crop", imagenes: ["https://images.unsplash.com/photo-1591290619762-c588dc522ff5?w=600&h=400&fit=crop"], categoria: "Tecnologia", stock: 120, descripcion: "Cargador inal√°mbrico de √∫ltima generaci√≥n" },
      { id: 2, nombre: "Aud√≠fonos In-Ear Pro", precio: 89.90, imagen: "https://images.unsplash.com/photo-1590658268037-6bf12165a8df?w=600&h=400&fit=crop", imagenes: ["https://images.unsplash.com/photo-1590658268037-6bf12165a8df?w=600&h=400&fit=crop"], categoria: "Tecnologia", stock: 60, descripcion: "Aud√≠fonos premium con cancelaci√≥n activa de ruido" },
      { id: 3, nombre: "Camiseta Casual", precio: 39.90, imagen: "https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=600&h=400&fit=crop", imagenes: ["https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=600&h=400&fit=crop"], categoria: "Ropa", stock: 80, descripcion: "Camiseta de algod√≥n 100%" },
      { id: 4, nombre: "Mochila Urbana", precio: 59.90, imagen: "https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=600&h=400&fit=crop", imagenes: ["https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=600&h=400&fit=crop"], categoria: "Accesorios", stock: 40, descripcion: "Mochila con compartimento para laptop" },
      { id: 5, nombre: "Organizador de Cocina 3 en 1", precio: 29.90, imagen: "https://images.unsplash.com/photo-1556911220-bff31c812dba?w=600&h=400&fit=crop", imagenes: ["https://images.unsplash.com/photo-1556911220-bff31c812dba?w=600&h=400&fit=crop"], categoria: "Utensilios", stock: 100, descripcion: "Set organizador vers√°til" },
      { id: 6, nombre: "L√°mpara LED Ambiente", precio: 34.90, imagen: "https://images.unsplash.com/photo-1507473885765-e6ed057f782c?w=600&h=400&fit=crop", imagenes: ["https://images.unsplash.com/photo-1507473885765-e6ed057f782c?w=600&h=400&fit=crop"], categoria: "Tecnologia", stock: 70, descripcion: "L√°mpara LED con m√∫ltiples colores" },
      { id: 7, nombre: "Mouse Gamer RGB", precio: 79.90, imagen: "https://images.unsplash.com/photo-1527814050087-3793815479db?w=600&h=400&fit=crop", imagenes: ["https://images.unsplash.com/photo-1527814050087-3793815479db?w=600&h=400&fit=crop"], categoria: "Tecnologia", stock: 45, descripcion: "Mouse gaming de alta precisi√≥n" },
      { id: 8, nombre: "Teclado Mec√°nico", precio: 129.90, imagen: "https://images.unsplash.com/photo-1587829741301-dc798b83add3?w=600&h=400&fit=crop", imagenes: ["https://images.unsplash.com/photo-1587829741301-dc798b83add3?w=600&h=400&fit=crop"], categoria: "Tecnologia", stock: 35, descripcion: "Teclado mec√°nico profesional" },
      { id: 9, nombre: "Sudadera con Capucha", precio: 69.90, imagen: "https://images.unsplash.com/photo-1556821840-3a63f95609a7?w=600&h=400&fit=crop", imagenes: ["https://images.unsplash.com/photo-1556821840-3a63f95609a7?w=600&h=400&fit=crop"], categoria: "Ropa", stock: 55, descripcion: "Sudadera premium con capucha" },
      { id: 10, nombre: "Jeans Slim Fit", precio: 89.90, imagen: "https://images.unsplash.com/photo-1542272604-787c3835535d?w=600&h=400&fit=crop", imagenes: ["https://images.unsplash.com/photo-1542272604-787c3835535d?w=600&h=400&fit=crop"], categoria: "Ropa", stock: 65, descripcion: "Jeans de mezclilla premium" }
    ];
    localStorage.setItem('flashbuy_productos', JSON.stringify(productos));
  }

  // Cargar pedidos
  const savedOrders = localStorage.getItem('flashbuy_pedidos');
  if (savedOrders) {
    pedidos = JSON.parse(savedOrders);
  }

  // Cargar clientes
  const savedClientes = localStorage.getItem('flashbuy_clientes');
  if (savedClientes) {
    clientes = JSON.parse(savedClientes);
  }

  // Cargar cupones
  const savedCupones = localStorage.getItem('flashbuy_cupones');
  if (savedCupones) {
    cupones = JSON.parse(savedCupones);
  }

  // Cargar zonas de env√≠o
  const savedZonas = localStorage.getItem('flashbuy_zonas_envio');
  if (savedZonas) {
    zonasEnvio = JSON.parse(savedZonas);
  } else {
    zonasEnvio = [
      { id: 1, nombre: 'Nacional', tarifa: 15.00, descripcion: 'Env√≠o a todo el pa√≠s' },
      { id: 2, nombre: 'Local', tarifa: 5.00, descripcion: 'Zona metropolitana' }
    ];
    localStorage.setItem('flashbuy_zonas_envio', JSON.stringify(zonasEnvio));
  }
}
    }

    // ============================================
    // NAVEGACI√ìN
    // ============================================
    function switchSection(sectionName) {
      // Ocultar todas las secciones
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      
      // Mostrar secci√≥n seleccionada
      document.getElementById(sectionName).classList.add('active');
      
      // Actualizar men√∫
      document.querySelectorAll('.menu-item').forEach(m => m.classList.remove('active'));
      event.currentTarget.classList.add('active');
      
      // Actualizar t√≠tulo
      const titles = {
        'dashboard': ['üìä Dashboard', 'Resumen general de tu tienda'],
        'productos': ['üì¶ Productos', 'Gesti√≥n de productos del cat√°logo'],
        'agregar-producto': ['‚ûï Agregar Producto', 'Crear o editar producto'],
        'pedidos': ['üõí Pedidos', 'Gesti√≥n de pedidos y ventas'],
        'clientes': ['üë• Clientes', 'Base de datos de clientes'],
        'marketing': ['üéØ Marketing', 'Cupones y promociones'],
        'envios': ['üöö Env√≠os', 'Configuraci√≥n de tarifas de env√≠o'],
        'configuracion': ['‚öôÔ∏è Configuraci√≥n', 'Ajustes generales del sistema']
      };
      
      document.getElementById('pageTitle').textContent = titles[sectionName][0];
      document.getElementById('pageSubtitle').textContent = titles[sectionName][1];
      
      // Cerrar sidebar en m√≥vil
      if (window.innerWidth <= 1024) {
        document.getElementById('sidebar').classList.remove('open');
      }
    }

    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('open');
    }

    // ============================================
    // FORMATO
    // ============================================
    function formatBRL(n) {
      return n.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
    }

    // ============================================
    // DASHBOARD
    // ============================================
    function actualizarDashboard() {
      const totalProductos = productos.length;
      const enStock = productos.filter(p => p.stock > 0).length;
      const stockBajo = productos.filter(p => p.stock > 0 && p.stock < 20).length;
      const valorInventario = productos.reduce((sum, p) => sum + (p.precio * p.stock), 0);
      
      document.getElementById('stat-total-productos').textContent = totalProductos;
      document.getElementById('stat-en-stock').textContent = enStock;
      document.getElementById('stat-stock-bajo').textContent = stockBajo;
      document.getElementById('stat-valor-inventario').textContent = formatBRL(valorInventario);
      
      // Gr√°fico de categor√≠as
      const categorias = {};
      productos.forEach(p => {
        categorias[p.categoria] = (categorias[p.categoria] || 0) + 1;
      });
      
      if (charts.categorias) charts.categorias.destroy();
      charts.categorias = new Chart(document.getElementById('chartCategorias'), {
        type: 'doughnut',
        data: {
          labels: Object.keys(categorias),
          datasets: [{
            data: Object.values(categorias),
            backgroundColor: ['#FF7A00', '#2196F3', '#4CAF50', '#9C27B0']
          }]
        },
        options: { responsive: true, maintainAspectRatio: true }
      });
      
      // Gr√°fico de stock
      const conStock = productos.filter(p => p.stock >= 20).length;
      const stockCritico = productos.filter(p => p.stock > 0 && p.stock < 20).length;
      const sinStock = productos.filter(p => p.stock === 0).length;
      
      if (charts.stock) charts.stock.destroy();
      charts.stock = new Chart(document.getElementById('chartStock'), {
        type: 'bar',
        data: {
          labels: ['Con Stock', 'Stock Bajo', 'Sin Stock'],
          datasets: [{
            label: 'Productos',
            data: [conStock, stockCritico, sinStock],
            backgroundColor: ['#4CAF50', '#FF9800', '#F44336']
          }]
        },
        options: { responsive: true, maintainAspectRatio: true, scales: { y: { beginAtZero: true } } }
      });
      
      // Tabla de stock cr√≠tico
      const criticos = productos.filter(p => p.stock > 0 && p.stock < 20).slice(0, 5);
      const tbody = document.getElementById('critical-stock-tbody');
      tbody.innerHTML = '';
      
      if (criticos.length === 0) {
        tbody.innerHTML = '<tr><td colspan="4" style="text-align:center;padding:20px;color:#999;">‚úÖ No hay productos con stock cr√≠tico</td></tr>';
      } else {
        criticos.forEach(p => {
          tbody.innerHTML += `
            <tr>
              <td><strong>${p.nombre}</strong></td>
              <td>${p.categoria}</td>
              <td><span style="color:#ef6c00;font-weight:bold;">${p.stock} unidades</span></td>
              <td>${formatBRL(p.precio)}</td>
            </tr>
          `;
        });
      }
    }

    // ============================================
    // PRODUCTOS
    // ============================================
    function renderizarProductos() {
      const tbody = document.getElementById('productos-tbody');
      tbody.innerHTML = '';
      
      let productosFiltrados = [...productos];
      
      // Aplicar filtro
      if (currentFilter !== 'todos') {
        if (currentFilter === 'stock-bajo') {
          productosFiltrados = productos.filter(p => p.stock > 0 && p.stock < 20);
        } else if (currentFilter === 'sin-stock') {
          productosFiltrados = productos.filter(p => p.stock === 0);
        } else {
          productosFiltrados = productos.filter(p => p.categoria === currentFilter);
        }
      }
      
      // Aplicar b√∫squeda
      const searchTerm = document.getElementById('search-productos')?.value.toLowerCase();
      if (searchTerm) {
        productosFiltrados = productosFiltrados.filter(p => 
          p.nombre.toLowerCase().includes(searchTerm) ||
          p.categoria.toLowerCase().includes(searchTerm)
        );
      }
      
      if (productosFiltrados.length === 0) {
        tbody.innerHTML = '<tr><td colspan="7" style="text-align:center;padding:40px;color:#999;">No hay productos con este filtro</td></tr>';
        return;
      }
      
      productosFiltrados.forEach((p, index) => {
        let badge = '';
        if (p.stock === 0) {
          badge = '<span class="badge hot">‚ùå AGOTADO</span>';
        } else if (p.stock < 20) {
          badge = '<span class="badge low-stock">‚ö†Ô∏è STOCK BAJO</span>';
        } else {
          badge = '<span class="badge trending">‚úì DISPONIBLE</span>';
        }
        
        tbody.innerHTML += `
          <tr>
            <td><strong>${index + 1}</strong></td>
            <td>
              <div style="display:flex;align-items:center;gap:15px;">
                <img src="${p.imagen}" class="product-img" alt="${p.nombre}">
                <strong>${p.nombre}</strong>
              </div>
            </td>
            <td><strong>${formatBRL(p.precio)}</strong></td>
            <td>${p.stock} unidades</td>
            <td>${p.categoria}</td>
            <td>${badge}</td>
            <td>
              <button class="btn-edit" onclick="editarProducto(${p.id})">‚úèÔ∏è Editar</button>
              <button class="btn-delete" onclick="eliminarProducto(${p.id})">üóëÔ∏è</button>
            </td>
          </tr>
        `;
      });
    }

    function filtrarProductos(filtro) {
      currentFilter = filtro;
      
      document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
      event.currentTarget.classList.add('active');
      
      renderizarProductos();
    }

    function buscarProductos() {
      renderizarProductos();
    }

    function guardarProducto(e) {
      e.preventDefault();
      
      const producto = {
        id: editingId || generarId(),
        nombre: document.getElementById('producto_nombre').value.trim(),
        precio: parseFloat(document.getElementById('producto_precio').value),
        imagen: document.getElementById('producto_imagen').value.trim(),
        imagenes: [document.getElementById('producto_imagen').value.trim()],
        categoria: document.getElementById('producto_categoria').value,
        stock: parseInt(document.getElementById('producto_stock').value),
        descripcion: document.getElementById('producto_descripcion').value.trim()
      };
      
      if (editingId) {
        const index = productos.findIndex(p => p.id === editingId);
        productos[index] = producto;
        alert('‚úÖ Producto actualizado correctamente');
      } else {
        productos.push(producto);
        alert('‚úÖ Producto agregado correctamente');
      }
      
      localStorage.setItem('flashbuy_productos', JSON.stringify(productos));
      
      limpiarFormulario();
      actualizarDashboard();
      renderizarProductos();
      switchSection('productos');
    }

    function editarProducto(id) {
      const producto = productos.find(p => p.id === id);
      if (!producto) return;
      
      editingId = id;
      document.getElementById('form-title').textContent = '‚úèÔ∏è Editar Producto';
      document.getElementById('btn-submit').textContent = 'üíæ Actualizar Producto';
      
      document.getElementById('producto_nombre').value = producto.nombre;
      document.getElementById('producto_precio').value = producto.precio;
      document.getElementById('producto_categoria').value = producto.categoria;
      document.getElementById('producto_stock').value = producto.stock;
      document.getElementById('producto_descripcion').value = producto.descripcion || '';
      document.getElementById('producto_imagen').value = producto.imagen;
      
      switchSection('agregar-producto');
    }

    function eliminarProducto(id) {
      if (!confirm('¬øEst√°s seguro de eliminar este producto?')) return;
      
      productos = productos.filter(p => p.id !== id);
      localStorage.setItem('flashbuy_productos', JSON.stringify(productos));
      
      renderizarProductos();
      actualizarDashboard();
      alert('üóëÔ∏è Producto eliminado correctamente');
    }

    function cancelarEdicion() {
      limpiarFormulario();
      switchSection('productos');
    }

    function limpiarFormulario() {
      document.getElementById('productoForm').reset();
      document.getElementById('form-title').textContent = '‚ûï Agregar Nuevo Producto';
      document.getElementById('btn-submit').textContent = 'üíæ Guardar Producto';
      editingId = null;
    }

    function generarId() {
      return productos.length > 0 ? Math.max(...productos.map(p => p.id)) + 1 : 1;
    }

    // ============================================
    // PEDIDOS
    // ============================================
    function renderizarPedidos() {
      const tbody = document.getElementById('pedidos-tbody');
      tbody.innerHTML = '';
      
      if (pedidos.length === 0) {
        tbody.innerHTML = '<tr><td colspan="7" style="text-align:center;padding:40px;color:#999;">No hay pedidos registrados</td></tr>';
        return;
      }
      
      pedidos.forEach(p => {
        tbody.innerHTML += `
          <tr>
            <td><strong>#${p.id}</strong></td>
            <td>${p.cliente}</td>
            <td>${p.productos} item(s)</td>
            <td><strong>${formatBRL(p.total)}</strong></td>
            <td><span class="order-status ${p.estado}">${p.estado.toUpperCase()}</span></td>
            <td>${new Date(p.fecha).toLocaleDateString('es')}</td>
            <td>
              <button class="btn-edit" onclick="cambiarEstadoPedido(${p.id})">üîÑ Cambiar Estado</button>
            </td>
          </tr>
        `;
      });
    }

    function agregarPedidoDemo() {
      const id = pedidos.length + 1;
      const pedido = {
        id: id,
        cliente: 'Cliente Demo #' + id,
        productos: Math.floor(Math.random() * 3) + 1,
        total: Math.random() * 200 + 50,
        estado: 'pending',
        fecha: new Date().toISOString()
      };
      
      pedidos.push(pedido);
      localStorage.setItem('flashbuy_pedidos', JSON.stringify(pedidos));
      renderizarPedidos();
      alert('‚úÖ Pedido demo agregado');
    }

    function cambiarEstadoPedido(id) {
      const pedido = pedidos.find(p => p.id === id);
      if (!pedido) return;
      
      const estados = ['pending', 'processing', 'shipped', 'delivered'];
      const currentIndex = estados.indexOf(pedido.estado);
      pedido.estado = estados[(currentIndex + 1) % estados.length];
      
      localStorage.setItem('flashbuy_pedidos', JSON.stringify(pedidos));
      renderizarPedidos();
    }

    // ============================================
    // CLIENTES
    // ============================================
    function renderizarClientes() {
      const tbody = document.getElementById('clientes-tbody');
      tbody.innerHTML = '';
      
      if (clientes.length === 0) {
        tbody.innerHTML = '<tr><td colspan="7" style="text-align:center;padding:40px;color:#999;">No hay clientes registrados</td></tr>';
        return;
      }
      
      clientes.forEach(c => {
        const segmento = c.totalGastado > 500 ? 'vip' : c.compras > 5 ? 'regular' : 'new';
        tbody.innerHTML += `
          <tr>
            <td><strong>${c.id}</strong></td>
            <td>${c.nombre}</td>
            <td>${c.email}</td>
            <td>${c.telefono}</td>
            <td>${c.compras}</td>
            <td><strong>${formatBRL(c.totalGastado)}</strong></td>
            <td><span class="customer-segment ${segmento}">${segmento.toUpperCase()}</span></td>
          </tr>
        `;
      });
    }

    function agregarClienteDemo() {
      const id = clientes.length + 1;
      const cliente = {
        id: id,
        nombre: 'Cliente #' + id,
        email: `cliente${id}@email.com`,
        telefono: '+57 300 000 00' + (10 + id),
        compras: Math.floor(Math.random() * 10),
        totalGastado: Math.random() * 1000
      };
      
      clientes.push(cliente);
      localStorage.setItem('flashbuy_clientes', JSON.stringify(clientes));
      renderizarClientes();
      alert('‚úÖ Cliente demo agregado');
    }

    // ============================================
    // MARKETING - CUPONES
    // ============================================
    function mostrarFormCupon() {
      document.getElementById('form-cupon').style.display = 'block';
    }

    function ocultarFormCupon() {
      document.getElementById('form-cupon').style.display = 'none';
      document.getElementById('cuponForm').reset();
    }

    function guardarCupon(e) {
      e.preventDefault();
      
      const cupon = {
        id: cupones.length + 1,
        codigo: document.getElementById('cupon_codigo').value.toUpperCase(),
        descuento: parseInt(document.getElementById('cupon_descuento').value),
        expiracion: document.getElementById('cupon_expiracion').value,
        usos: parseInt(document.getElementById('cupon_usos').value) || 999,
        usosActuales: 0
      };
      
      cupones.push(cupon);
      localStorage.setItem('flashbuy_cupones', JSON.stringify(cupones));
      
      renderizarCupones();
      ocultarFormCupon();
      alert('‚úÖ Cup√≥n creado correctamente');
    }

    function renderizarCupones() {
      const container = document.getElementById('cupones-list');
      container.innerHTML = '';
      
      if (cupones.length === 0) {
        container.innerHTML = '<p style="text-align:center;padding:40px;color:#999;">No hay cupones creados</p>';
        return;
      }
      
      cupones.forEach(c => {
        container.innerHTML += `
          <div class="coupon-card">
            <div class="coupon-code">${c.codigo}</div>
            <p><strong>${c.descuento}%</strong> de descuento</p>
            <p>üìÖ V√°lido hasta: ${new Date(c.expiracion).toLocaleDateString('es')}</p>
            <p>üé´ Usos: ${c.usosActuales} / ${c.usos}</p>
            <button class="btn-delete" onclick="eliminarCupon(${c.id})" style="margin-top:10px;">üóëÔ∏è Eliminar</button>
          </div>
        `;
      });
    }

    function eliminarCupon(id) {
      if (!confirm('¬øEliminar este cup√≥n?')) return;
      cupones = cupones.filter(c => c.id !== id);
      localStorage.setItem('flashbuy_cupones', JSON.stringify(cupones));
      renderizarCupones();
    }

    // ============================================
    // ENV√çOS
    // ============================================
    function renderizarZonasEnvio() {
      const container = document.getElementById('zonas-envio-list');
      container.innerHTML = '';
      
      zonasEnvio.forEach(z => {
        container.innerHTML += `
          <div class="shipping-zone">
            <h4>${z.nombre}</h4>
            <div class="shipping-rate">
              <span>${z.descripcion}</span>
              <strong>${formatBRL(z.tarifa)}</strong>
            </div>
            <button class="btn-edit" onclick="editarZona(${z.id})">‚úèÔ∏è Editar</button>
            <button class="btn-delete" onclick="eliminarZona(${z.id})">üóëÔ∏è Eliminar</button>
          </div>
        `;
      });
    }

    function agregarZonaEnvio() {
      const nombre = prompt('Nombre de la zona:');
      if (!nombre) return;
      
      const tarifa = parseFloat(prompt('Tarifa de env√≠o:'));
      if (isNaN(tarifa)) return;
      
      const descripcion = prompt('Descripci√≥n:') || '';
      
      zonasEnvio.push({
        id: zonasEnvio.length + 1,
        nombre,
        tarifa,
        descripcion
      });
      
      localStorage.setItem('flashbuy_zonas_envio', JSON.stringify(zonasEnvio));
      renderizarZonasEnvio();
    }

    function editarZona(id) {
      const zona = zonasEnvio.find(z => z.id === id);
      if (!zona) return;
      
      const tarifa = parseFloat(prompt('Nueva tarifa:', zona.tarifa));
      if (!isNaN(tarifa)) {
        zona.tarifa = tarifa;
        localStorage.setItem('flashbuy_zonas_envio', JSON.stringify(zonasEnvio));
        renderizarZonasEnvio();
      }
    }

    function eliminarZona(id) {
      if (!confirm('¬øEliminar esta zona?')) return;
      zonasEnvio = zonasEnvio.filter(z => z.id !== id);
      localStorage.setItem('flashbuy_zonas_envio', JSON.stringify(zonasEnvio));
      renderizarZonasEnvio();
    }

    // ============================================
    // CONFIGURACI√ìN
    // ============================================
    function cargarConfiguracion() {
      const mantenimiento = localStorage.getItem('flashbuy_mantenimiento') === 'true';
      document.getElementById('toggle-mantenimiento').checked = mantenimiento;
    }

    function toggleMantenimiento() {
      const activo = document.getElementById('toggle-mantenimiento').checked;
      localStorage.setItem('flashbuy_mantenimiento', activo);
      
      if (activo) {
        alert('‚ö†Ô∏è Modo mantenimiento ACTIVADO\nLa tienda mostrar√° una p√°gina de mantenimiento.');
      } else {
        alert('‚úÖ Modo mantenimiento DESACTIVADO\nLa tienda est√° operativa.');
      }
    }

    function limpiarDatos() {
      if (!confirm('‚ö†Ô∏è ¬øEst√°s seguro? Esto eliminar√° TODOS los datos del admin.')) return;
      if (!confirm('üö® √öLTIMA CONFIRMACI√ìN: Se perder√°n productos, pedidos, clientes, cupones y configuraci√≥n.')) return;
      
      localStorage.removeItem('flashbuy_productos');
      localStorage.removeItem('flashbuy_pedidos');
      localStorage.removeItem('flashbuy_clientes');
      localStorage.removeItem('flashbuy_cupones');
      localStorage.removeItem('flashbuy_zonas_envio');
      
      alert('üóëÔ∏è Datos eliminados. Recargando p√°gina...');
      location.reload();
    }

    function exportarDatos() {
      const datos = {
        productos,
        pedidos,
        clientes,
        cupones,
        zonasEnvio,
        fecha: new Date().toISOString()
      };
      
      const dataStr = JSON.stringify(datos, null, 2);
      const dataBlob = new Blob([dataStr], { type: 'application/json' });
      const url = URL.createObjectURL(dataBlob);
      
      const link = document.createElement('a');
      link.href = url;
      link.download = `flashbuy-backup-${Date.now()}.json`;
      link.click();
      
      alert('üì• Datos exportados correctamente');
    }
  </script>

</body>
</html>